//global and namespaced variable

var PACMAN = {
  comps:{},
  systems:{},
  entities:{},
  score:0
};

PACMAN.context = document.getElementById("canvas").getContext("2d");
PACMAN.bgContext = document.getElementById("background").getContext("2d");
PACMAN.scoreContext = document.getElementById("canvasscore").getContext("2d");
PACMAN.map = {
  cols:21,
  rows:27,
  tileSize:20,
  atlas: 'pacman-sprite.png',
  tiles:[1,2,2,2,2,2,2,2,2,2,7,2,2,2,2,2,2,2,2,2,3,
         10,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,10,
         10,0,1,2,3,0,1,2,3,0,10,0,1,2,3,0,1,2,3,0,10,
         10,0,10,0,10,0,10,0,10,0,10,0,10,0,10,0,10,0,10,0,10,
         10,0,4,2,5,0,4,2,5,0,14,0,4,2,5,0,4,2,5,0,10,
         10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,
         10,0,1,2,3,0,13,0,1,2,2,2,3,0,13,0,1,2,3,0,10,
         10,0,4,2,5,0,10,0,4,2,7,2,5,0,10,0,4,2,5,0,10,
         10,0,0,0,0,0,10,0,0,0,10,0,0,0,10,0,0,0,0,0,10,
         4,2,2,2,3,0,8,2,11,0,14,0,12,2,6,0,1,2,2,2,5,
         0,0,0,0,10,0,10,0,0,0,0,0,0,0,10,0,10,0,0,0,0,
         0,0,0,0,10,0,10,0,1,16,15,17,3,0,10,0,10,0,0,0,0,
         12,2,2,2,5,0,14,0,10,0,0,0,10,0,14,0,4,2,2,2,11,
         0,0,0,0,0,0,0,0,10,0,0,0,10,0,0,0,0,0,0,0,0,
         12,2,2,2,3,0,13,0,4,2,2,2,5,0,13,0,1,2,2,2,11,
         0,0,0,0,10,0,10,0,0,0,0,0,0,0,10,0,10,0,0,0,0,
         0,0,0,0,10,0,10,0,1,2,2,2,3,0,10,0,10,0,0,0,0,
         1,2,2,2,5,0,14,0,4,2,7,2,5,0,14,0,4,2,2,2,3,
         10,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,10,
         10,0,12,2,3,0,12,2,11,0,14,0,12,2,11,0,1,2,11,0,10,
         10,0,0,0,10,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,10,
         8,2,3,0,10,0,13,0,1,2,2,2,3,0,13,0,10,0,1,2,6,
         8,2,5,0,14,0,10,0,4,2,7,2,5,0,10,0,14,0,4,2,6,
         10,0,0,0,0,0,10,0,0,0,10,0,0,0,10,0,0,0,0,0,10,
         10,0,12,2,2,2,9,2,11,0,14,0,12,2,9,2,2,2,11,0,10,
         10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,
         4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,5],
  logic: [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
         0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,
         0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,
         0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,
         0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,
         0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,
         0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0,
         0,1,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,1,0,
         0,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,0,
         0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,
         0,0,0,0,0,1,0,1,1,1,1,1,1,1,0,1,0,0,0,0,0,
         0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,
         0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,
         1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,
         0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,
         0,0,0,0,0,1,0,1,1,1,1,1,1,1,0,1,0,0,0,0,0,
         0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,
         0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,
         0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,
         0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,1,0,
         0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0,
         0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,
         0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,
         0,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,0,
         0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,
         0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,
         0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
  width: function(){
    return this.cols * this.tileSize
  },
  height: function() {
    return this.rows * this.tileSize
  },
  getTile: function(col,row){
    return this.tiles[row * this.cols + col];
  },
  getTileAtPosition : function(x, y){
    var col = Math.floor(x / this.tileSize);
    var row = Math.floor(y / this.tileSize);
    return this.getTile(col, row);
  },
  getLogicTile: function(col, row){
    return this.logic[row * this.cols + col];
  },
  getLogicTileAtPosition : function(x, y){
    var col = Math.floor(x / this.tileSize);
    var row = Math.floor(y / this.tileSize);
    return this.getLogicTile(col, row);
  },
  updateLogicTile : function(x, y, val){
    var col = Math.floor(x / this.tileSize);
    var row = Math.floor(y / this.tileSize);
    this.logic[row * this.cols + col] = val;
  }
};
